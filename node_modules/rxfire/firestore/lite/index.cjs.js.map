{"version":3,"file":"index.cjs.js","sources":["../../../firestore/lite/document/index.ts","../../../firestore/lite/collection/index.ts","../../../firestore/lite/fromRef.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign } from \"tslib\";\nimport { map } from 'rxjs/operators';\nimport { from } from 'rxjs';\nimport { getDoc } from 'firebase/firestore/lite';\nexport function doc(ref) {\n    return from(getDoc(ref));\n}\n/**\n * Returns a stream of a document, mapped to its data payload and optionally the document ID\n * @param query\n */\nexport function docData(ref, idField) {\n    return doc(ref).pipe(map(function (snap) { return snapToData(snap, idField); }));\n}\nexport function snapToData(snapshot, idField) {\n    var _a;\n    // match the behavior of the JS SDK when the snapshot doesn't exist\n    if (!snapshot.exists) {\n        return snapshot.data();\n    }\n    return __assign(__assign({}, snapshot.data()), (idField ? (_a = {}, _a[idField] = snapshot.id, _a) : null));\n}\n","/**\n * @license\n * Copyright 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { from } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { snapToData } from '../document';\nimport { getDocs } from 'firebase/firestore/lite';\n/**\n * Return a stream of document snapshots on a query. These results are in sort order.\n * @param query\n */\nexport function collection(query) {\n    return from(getDocs(query)).pipe(map(function (changes) { return changes.docs; }));\n}\n/**\n * Returns a stream of documents mapped to their data payload, and optionally the document ID\n * @param query\n */\nexport function collectionData(query, idField) {\n    return collection(query).pipe(map(function (arr) {\n        return arr.map(function (snap) { return snapToData(snap, idField); });\n    }));\n}\n","import { getDoc, getDocs } from 'firebase/firestore/lite';\nimport { from } from 'rxjs';\nexport function fromRef(ref) {\n    if (ref.type === 'document') {\n        return from(getDoc(ref));\n    }\n    else {\n        return from(getDocs(ref));\n    }\n}\n"],"names":["from","getDoc","map","__assign","getDocs"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKO,SAAS,GAAG,CAAC,GAAG,EAAE;AACzB,IAAI,OAAOA,SAAI,CAACC,WAAM,CAAC,GAAG,CAAC,CAAC,CAAC;AAC7B,CAAC;AACD;AACA;AACA;AACA;AACO,SAAS,OAAO,CAAC,GAAG,EAAE,OAAO,EAAE;AACtC,IAAI,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAACC,aAAG,CAAC,UAAU,IAAI,EAAE,EAAE,OAAO,UAAU,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACrF,CAAC;AACM,SAAS,UAAU,CAAC,QAAQ,EAAE,OAAO,EAAE;AAC9C,IAAI,IAAI,EAAE,CAAC;AACX;AACA,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;AAC1B,QAAQ,OAAO,QAAQ,CAAC,IAAI,EAAE,CAAC;AAC/B,KAAK;AACL,IAAI,OAAOC,cAAQ,CAACA,cAAQ,CAAC,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,GAAG,OAAO,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,QAAQ,CAAC,EAAE,EAAE,EAAE,IAAI,IAAI,EAAE,CAAC;AAChH;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACO,SAAS,UAAU,CAAC,KAAK,EAAE;AAClC,IAAI,OAAOH,SAAI,CAACI,YAAO,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAACF,aAAG,CAAC,UAAU,OAAO,EAAE,EAAE,OAAO,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;AACvF,CAAC;AACD;AACA;AACA;AACA;AACO,SAAS,cAAc,CAAC,KAAK,EAAE,OAAO,EAAE;AAC/C,IAAI,OAAO,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,CAACA,aAAG,CAAC,UAAU,GAAG,EAAE;AACrD,QAAQ,OAAO,GAAG,CAAC,GAAG,CAAC,UAAU,IAAI,EAAE,EAAE,OAAO,UAAU,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC;AAC9E,KAAK,CAAC,CAAC,CAAC;AACR;;ACjCO,SAAS,OAAO,CAAC,GAAG,EAAE;AAC7B,IAAI,IAAI,GAAG,CAAC,IAAI,KAAK,UAAU,EAAE;AACjC,QAAQ,OAAOF,SAAI,CAACC,WAAM,CAAC,GAAG,CAAC,CAAC,CAAC;AACjC,KAAK;AACL,SAAS;AACT,QAAQ,OAAOD,SAAI,CAACI,YAAO,CAAC,GAAG,CAAC,CAAC,CAAC;AAClC,KAAK;AACL;;;;;;;;;"}